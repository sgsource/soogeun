<!DOCTYPE html>
<html>
    <head>
        <title>Exchange Rates API</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <script language="javascript">
        function getRates() {
            request = new XMLHttpRequest();
            console.log("1 - request object created");

            request.open("GET", "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/usd.json", true);
            console.log("2 - opened request file");

            request.onreadystatechange = function() {
				console.log("3 - readystatechange event fired.");

				if (request.readyState == 4 && request.status == 200) {
					console.log("5 - response received");
					result = request.responseText;
					// alert(result);
					rates = JSON.parse(result);
					document.getElementById("data").innerHTML
                    = "1 USD = " + rates["usd"]["krw"] + " KRW </br>"
                    + "1 USD = " + rates["usd"]["jpy"] + " JPY </br>";

				}
				else if (request.readyState == 4 && request.status != 200) {
					document.getElementById("data").innerHTML =
                        "Something is wrong! Check the logs to see where this went off the rails";
				}
				else if (request.readyState == 3) {
					document.getElementById("data").innerHTML = "Too soon!  Try again";
				}
			}
			request.send();
			console.log("4 - Request sent");
        }
    </script>

    <body onload="getRates()">
        <h1>Exchange Rates (USD to KRW/JPY)</h1>
        <div id="data">Loading...</div>
    </body>
</html>
