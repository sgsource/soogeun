<!DOCTYPE html>
<html>
    <head>
        <title>Exchange Rates API</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <script language="javascript">
        function getRates() {
            request = new XMLHttpRequest();
            console.log("1 - request object created");

            request.open("GET", "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/usd.json", true);
            console.log("2 - opened request file");

            request.onreadystatechange = function() {
				console.log("3 - readystatechange event fired.");

				if (request.readyState == 4 && request.status == 200) {
					console.log("5 - response received");
					result = request.responseText;
					// alert(result);
					rates = JSON.parse(result);
					document.getElementById("data").innerHTML
                    = "1 USD = " + rates["usd"]["krw"] + " KRW </br>"
                    + "1 USD = " + rates["usd"]["jpy"] + " JPY </br>";

				}
				else if (request.readyState == 4 && request.status != 200) {
					document.getElementById("data").innerHTML =
                        "Something is wrong! Check the logs to see where this went off the rails";
				}
				else if (request.readyState == 3) {
					document.getElementById("data").innerHTML = "Too soon!  Try again";
				}
			}
			request.send();
			console.log("4 - Request sent");
        }
    </script>

    <body onload="getRates()">
        <h1>Exchange Rates API</h1>
        <p> API selected: Exchange Rates </p>
        <br/>
        <p> Description: Allows users to set base currency and date of rate to retrieve exchange rate data.</p>
        <br/>
        <p> Source: </p>
        <a href='https://github.com/fawazahmed0/currency-api#readme'>
            https://github.com/fawazahmed0/currency-api#readme
        </a>
        <br/>
        <p> Options: I used the "latest" time and base currency of USD.
            This gave me the data of USD to tons of other currencies.
            Of these, I selected KRW and JPY,
            which are S. Korean Won and Japanese Yen </p>
        <br/>
        <p>
            Applications: (1) I personally used to exchange USD to KRW
            and vice versa to make profit. It's a very slow process that does
            not get you a lot of profit, but since you get to choose when to
            exchange, you don't "lose" money. Using this data could make the
            process way easier. (2) When I'm travelling, I'd like to know these
            rates beforehand so I can make arrangements and decide when to
            exchange. Getting data from multiple dates can allow me to graph
            it and view it over time too.
        </p>
        <br/>
        <div id="data">Loading...</div>
    </body>
</html>
