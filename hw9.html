<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script
            src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous">
        </script>
    </head>
    <body>
        <div id="str"></div>
        <div id="user"></div>
        <form>
            <select id="genres">
                <option value="Folk">Folk</option>
                <option value="Pop">Pop</option>
                <option value="Rock">Rock</option>
                <option value="Reggae">Reggae</option>
                <option value="Indie">Indie</option>
                <option value="Soul">Soul</option>
                <option value="Dance">Dance</option>
            </select>
            <input type="button" id="button" value="Filter">
        </form>
        <div id="subset"></div>

        <script language="javascript">
            let ls = "";
            $.get("hw9.json", function (data) {
                document.getElementById("str").innerHTML =
                    JSON.stringify(data) + "<br/><br/>";

        		data.forEach(function (song) {
                    ls += song.title  + "<br/>"
                       +  "Artist: "  + song.artist + "<br/>"
                       +  "Genre: "   + song.genre + "<br/>"
                       +  "Released " + song.year + "<br/><br/>"
        			}
                )
            	document.getElementById("user").innerHTML = ls;
        	})
            $("#button").click(filter);

            function filter () {
                let v = document.getElementById("genres").value;
                let ts = "";
                $.get("hw9.json", function (data) {

                    // search all objects
                    for (let i = 0; i < data.length; i++) {
                        let gs = data[i].genre;

                        // in each obj, search for genre
                        for (let j = 0; j < gs.length; j++) {
                            if (gs[j] == v) {
                                ts += data[i].name + "<br/>";
                                j = gs.length;
                            }
                        }
                    }
            	})
                document.getElementById("subset").innerHTML = ts;
            }

        </script>
    </body>
</html>
